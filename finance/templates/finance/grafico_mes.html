{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Gráfico do Mês - {{ mes_nome }} {{ ano }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body class="bg-light">
    <div class="container mt-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <a href="{% url 'mes_atual' ano=ano_anterior mes=mes_anterior %}" class="btn btn-outline-primary">⬅️ {{ mes_anterior_nome }}</a>
        <h1>Gráfico - {{ mes_nome }} {{ ano }}</h1>
        <a href="{% url 'mes_atual' ano=ano_proximo mes=mes_proximo %}" class="btn btn-outline-primary">{{ mes_proximo_nome }} ➡️</a>
      </div>

      <div class="card shadow p-4">
        <canvas id="graficoMes" width="600" height="300"></canvas>
      </div>

      <div class="text-center mt-3">
        <a href="{% url 'mes_atual' ano=ano mes=mes %}" class="btn btn-secondary">⬅️ Voltar para o mês</a>
      </div>
    </div>

    <script>
const ctx = document.getElementById('graficoMes').getContext('2d');
const graficoMes = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Entradas', 'Saídas', 'Guardar'],
        datasets: [
            {
                label: 'Realizado',
                data: [{{ total_entradas }}, {{ total_saidas }}, {{ total_guardar }}],
                backgroundColor: 'rgba(54, 162, 235, 0.5)'
            },
            {
                label: 'Previsto',
                data: [{{ total_prev_entradas }}, {{ total_prev_saidas }}, {{ total_prev_guardar }}],
                backgroundColor: 'rgba(255, 99, 132, 0.5)'
            }
        ]
    },
    options: {
        responsive: true,
        plugins: {
            legend: { position: 'top' },
            title: { display: true, text: 'Comparativo Previsão x Realizado' }
        },
        scales: {
            y: { beginAtZero: true }
        }
    }
});
</script>
  </body>
</html>
